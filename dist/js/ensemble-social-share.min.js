/*!
 * ensemble Social Share
 * @version 0.4.0
 * @link https://github.com/loltgt/ensemble-social-share
 * @copyright Copyright (C) Leonardo Laureti
 * @license MIT License
 */
!function(t){"use strict";const e=new Proxy({},{get:(t,e)=>t.lang&&t[t.lang][e]||e}),s="html|head|body|meta|link|style|script";class part{render(){delete this.element,delete this.render}bind(t,e){const s=this[this.ns];return"function"==typeof e&&e.call(this,s),!!t.appendChild(s)}unbind(t,e){const s=this[this.ns];return"function"==typeof e&&e.call(this,s),!!t.removeChild(s)}place(t,e){const s=this[this.ns];return"function"==typeof e&&e.call(this,s),!!t.replaceWith(s)}append(t){const e=this.ns;return!!this[e].appendChild(t[e])}prepend(t){const e=this.ns,s=this[e];return!!s.insertBefore(t[e],s.firstElementChild||null)}remove(t){const e=this.ns;return!!this[e].removeChild(t[e])}fill(t){if(!t instanceof Element||RegExp(s,"i").test(t.tagName)||RegExp(`(<(${s})*>)`,"i").test(t.innerHTML))throw new Error(e.EMTAG);return this.empty(),!!this[this.ns].appendChild(t)}empty(){for(;this.first;)this.remove(this.first)}get children(){return Array.prototype.map.call(this[this.ns].children,(t=>t._1))}get first(){const t=this[this.ns];return t.firstElementChild?t.firstElementChild._1:null}get last(){const t=this[this.ns];return t.lastElementChild?t.lastElementChild._1:null}}class Compo extends part{constructor(t,n,i,o,r,a){super();const l=this.ns=`_${t}`,c=n?n.toString():"div";if(RegExp(s,"i").test(c))throw new Error(e.ETAGN);const h=this[l]=this.element(t,c,i,o,r,a);if(this.__Compo=1,this[l]._1=this,o&&"object"==typeof o)for(const s in o){const n=s.toString();if(RegExp("attributes|classList|innerHTML|outerHTML|nodeName|nodeType").test(n))throw new Error(e.EPROP);if(0===n.indexOf("on")&&o[n]&&"function"==typeof o[n])h[n]=o[n].bind(this);else if("object"!=typeof o[n])h[n]=o[n];else if("children"==n&&"object"==typeof o[n]&&o[n].length)for(const e of o.children){const{tag:s,name:n,props:i}=e;this.append(new Compo(t,s,n,i))}}if(i){const e=h.className;h.className="","string"==typeof i?h.className=`${t}-${i}`:"object"==typeof i&&(h.className=Object.values(i).map((e=>`${t}-${e}`)).join(" ")),e&&(h.className+=` ${e}`)}this.render()}element(t,e,s,n,i,o){return o?document.createElementNS(o,e,i):document.createElement(e,i)}hasAttr(t){return this[this.ns].hasAttribute(t)}getAttr(t){return this[this.ns].getAttribute(t)}setAttr(t,e){this[this.ns].setAttribute(t,e)}delAttr(t){this[this.ns].removeAttribute(t)}getStyle(t){return getComputedStyle(this[this.ns])[t]}show(){this[this.ns].hidden=!1}hide(){this[this.ns].hidden=!0}enable(){this[this.ns].disabled=!1}disable(){this[this.ns].disabled=!0}get node(){return console.warn(e.DOM),this[this.ns]}get parent(){const t=this[this.ns];return t.parentElement&&t.parentElement._1?t.parentElement._1:null}get previous(){const t=this[this.ns];return t.previousElementSibling?t.previousElementSibling._1:null}get next(){const t=this[this.ns];return t.nextElementSibling?t.nextElementSibling._1:null}get classList(){return this[this.ns].classList}static isCompo(t){return t instanceof Compo}}class Data{constructor(t,e){e&&"object"==typeof e&&Object.assign(this,{},e);const s=this.ns=`_${t}`;this.__Data=0,this[s]={ns:t}}compo(t,e,s,n=!1,i=!1,o=!1){const r=this[this.ns].ns;let a;return a=n?{ns:r,tag:t,name:e,props:s,load:i,unload:o}:new Compo(r,t,e,s),i&&"function"==typeof i&&(a.load=s.onload=i),o&&"function"==typeof o&&(a.unload=s.onunload=o),a}async render(t){const e=this[this.ns],s=this;e[t]&&e[t]._||(e[t]={_:s[t],load:s[t].load,unload:s[t].unload},s[t]=new Compo(s[t].ns,s[t].tag,s[t].name,s[t].props)),e[t].load()}async unload(t){const e=this[this.ns];e[t]&&e[t]._&&e[t].unload()}async reflow(t,e){const s=this[this.ns];e?s[t]=this.compo(s[t]._.ns,s[t]._.name,s[t]._.props):s[t]&&s[t]._&&s[t].load()}static isData(t){return t instanceof Data}}class Event{constructor(t,e,s){const n=this.ns=`_${t}`;s=(Compo.isCompo(s)?s[t]:s)||document,this.__Event=0,this[n]={name:e,node:s}}add(t,e=!1){const{node:s,name:n}=this[this.ns];s.addEventListener(n,t,e)}remove(t){const{node:e,name:s}=this[this.ns];e.removeEventListener(s,t)}static prevent(t){t.preventDefault()}static focus(t,e){const{currentTarget:s}=t;s.focus&&s.focus(e)}static blur(t,e=100){const{currentTarget:s}=t;setTimeout((()=>s.blur&&s.blur()),e)}static isEvent(t){return t instanceof Event}}class base{constructor(){const t=arguments;let s,n;if(t.length>1?(s=t[0],n=t[1]):t[0]&&"object"==typeof t[0]&&t[0].nodeType?s=t[0]:n=t[0],n&&"object"!=typeof n)throw new TypeError(e.EOPTS);if(s&&"object"!=typeof s)throw new TypeError(e.EELEM);this.binds(),this.options=this.opts(this.defaults(),n),Object.freeze(this.options),this.element=s}opts(t,e={}){const s={};for(const n in t)null!=t[n]&&"object"==typeof t[n]?s[n]=Object.assign(t[n],e[n]):s[n]=void 0!==e[n]?e[n]:t[n];return s}compo(t,e,s){const n=this.options.ns;return null!=t?new Compo(n,t,e,s):Compo}data(t){const e=this.options.ns;return null!=t?new Data(e,t):Data}event(t,e){const s=this.options.ns;return null!=t?new Event(s,t,e):Event}selector(t,e,s=!1){return e=e||document,s?e.querySelectorAll(t):e.querySelector(t)}cloneNode(t,e=!1){return t.cloneNode(e)}hasAttr(t,e){return t.hasAttribute(e)}getAttr(t,e){return t.getAttribute(e)}icon(t,e,s,n,i,o){const r=this.options.ns,a=s?`${s}-${e}`:e,l=this.compo("span","icon",{className:a});if("font"!=t)if("symbol"==t||"shape"==t){const e="http://www.w3.org/2000/svg",s=new Compo(r,"svg",!1,!1,null,e),a="symbol"==t?"use":"path",c=new Compo(r,a,!1,!1,null,e);if(o){const t=o.match(/\d+ \d+ (\d+) (\d+)/);t&&Object.entries({width:t[1],height:t[2],viewBox:t[0]}).forEach((t=>s.setAttr(t[0],t[1])))}"use"==a?c.setAttr("href",`#${i}`):c.setAttr("d",n),s.append(c),l.append(s)}else if("svg"==t&&this.origin()){const t=this.compo(r,"img",!1,{src:`${n}#${i}`});l.append(t)}return l}origin(t,e){return e=URL.canParse(e)?e:"null"!=window.origin?window.origin:window.location.origin,t=URL.canParse(t)?new URL(t).origin:e,e&&t&&e===t}cst(t,e){let s=Compo.isCompo(t)?t.getStyle(e):getComputedStyle(t)[e];return s&&(s=s.indexOf("s")?1e3*parseFloat(s):parseInt(s)),s||0}delay(t,e,s){const n=e?this.cst(e,"transitionDuration"):0;setTimeout(t,n||s)}wrap(t){const s=this;if(this[t]&&"function"!=typeof t)throw new TypeError(e.EMETH);return function(){t.call(s,...arguments,this)}}}const n=Object.freeze({share:0,send:1,email:2,copy:3,webapi:4});t.SocialShare=class SocialShare extends base{static actionEnum(){return n}aks(){const t=n;return{facebook:t.share,x:t.share,linkedin:t.share,threads:t.share,bluesky:t.share,reddit:t.share,mastodon:t.share,quora:t.share,whatsapp:t.send,messenger:t.send,telegram:t.send,skype:t.send,viber:t.send,line:t.send,snapchat:t.send,"send-email":t.email,"copy-link":t.copy,"web-share":t.webapi}}defaults(){return this.ska=this.aks(),{ns:"share",root:"body",className:"social-share",layout:"h",icons:{type:"font",prefix:"icon"},effects:!0,link:"",title:"",description:"",intents:null,scaffold:this.ska,uriform:{facebook:"https://www.facebook.com/dialog/share?display=popup&href=%url%&app_id=%app_id%",x:"https://twitter.com/intent/tweet?text=%title%&url=%url%",linkedin:"https://www.linkedin.com/sharing/share-offsite?mini=true&url=%url%&title=%title%&ro=false&summary=%summary%",threads:"https://threads.net/intent/post?text=%url%",bluesky:"https://bsky.app/intent/compose?text=%url%",reddit:"https://www.reddit.com/submit?url=%url%&title=%title%",mastodon:"https://mastodon.social/share?text=%text%",quora:"https://www.quora.com/share?url=%url%&title=%title%",whatsapp:"https://api.whatsapp.com/send?text=%text%",messenger:"fb-messenger://share/?link=%url%&app_id=%app_id%",telegram:"https://telegram.me/share/url?url=%url%&text=%text%",skype:"https://web.skype.com/share?url=%url%&text=%title%",viber:"viber://forward?text=%text%",line:"https://line.me/R/msg/text/?%text%",snapchat:"https://www.snapchat.com/share?link=%url%","send-email":"mailto:?subject=%subject%&body=%text%"},selectorLink:{element:'link[rel="canonical"]',attribute:"href"},selectorTitle:null,selectorDescription:{element:'meta[name="description"]',attribute:"content"},label:{className:"sr-only"},ariaLabel:!0,copiedEffectDelay:1e3,locale:{label:"Share",share:"Share on %s",send:"Send to %s",subject:"An interesting thing",text:"Hi! Here something may interesting you: %s",email:"Send via email",copy:"Copy link",copied:"Copied link!",whatsapp:"WhatsApp",linkedin:"LinkedIn","web-share":"Share"},onIntent:()=>{},onInit:()=>{}}}binds(){this.intent=this.wrap(this.intent)}constructor(){super(...arguments),this.encoder=encodeURIComponent,this.init()}init(){if(this.built)return;const t=this.options;this.root=this.selector(t.root);let e=[];if(t.intents||this.ska!==t.scaffold)t.intents instanceof Array?e=t.intents:t.intents&&(e=Object.keys(t.scaffold));else{const t=Object.keys(this.ska);for(const s of[0,1,8,9,10,2,15,16,17])e.push(t[s])}this.intents=e,this.layout(),this.element&&this.$.place(this.element,function(t){this.element=t}.bind(this)),this.drawer(),t.onInit.call(this,this)}layout(){const t=this.options,e=t.locale,s=this.$=this.compo(!1,!1,{className:"object"==typeof t.className?Object.values(t.className).join(" "):t.className});if(t.ariaLabel){const n=t.ariaLabel;s.setAttr("aria-label","string"==typeof n?n:e.label)}if(t.label){const n=t.label,i=this.compo("span","label",{className:n.className,innerText:n.text??e.label});s.append(i)}"v"==t.layout&&s.classList.add(`${t.ns}-vertical`);const n=this.actions=this.compo("ul","actions");s.append(n),this.built=!0}drawer(){const t=n,e=this.options,s=e.locale;for(const n of this.intents){if(!n in e.scaffold)continue;const i=n in s?s[n].toString():n.replace(/\w/,(t=>t.toUpperCase()));let o;switch(e.scaffold[n]){case t.share:o=s.share.toString().replace("%s",i);break;case t.send:o=s.send.toString().replace("%s",i);break;case t.email:o=s.email.toString();break;case t.copy:o=s.copy.toString();break;case t.webapi:if(!navigator.share)continue;o=s["web-share"].toString()}this.action(n,o)}}action(t,e){const s=this.options,n=this.compo("li","action",{className:`${s.ns}-action-${t}`}),i=this.compo("button",["button","intent"],{className:`${s.ns}-intent-${t}`,title:e,onclick:this.intent});n.setAttr("data-share-intent",t),n.append(i);{const{type:e,prefix:n,src:o,viewBox:r}=s.icons,a=this.icon(e,t,n,o,t,r);i.append(a)}this.actions.append(n)}intent(t,e){if(this.event().prevent(t),!t.isTrusted)return;const s=n,i=this.options,o=i.locale;if(!this.compo().isCompo(e))return;const r=e.parent;if(!r||!r.hasAttr("data-share-intent"))return;const a=r.getAttr("data-share-intent");if(-1==this.intents.indexOf(a))return;let l,c,h,p;const{selectorLink:d,selectorTitle:u,selectorDescription:m}=i;l=i.link?new URL(i.link).toString():d&&d.element&&this.selector(d.element)?this.getAttr(this.selector(d.element),d.attribute):window.location.href,c=i.title?i.title:u&&u.element&&this.selector(u.element)?this.getAttr(this.selector(u.element),u.attribute):document.title,h=i.description?i.description:m&&m.element&&this.selector(m.element)?this.getAttr(this.selector(m.element),m.attribute):c,p="\n\n%title%\n%url%\n\n";const f={url:l,title:c,text:"\n\n%title%\n%url%\n\n",summary:h};if(i.onIntent.call(this,this,t,a,f),f.text=o.text.toString().replace("%s",f.text),a in i.scaffold)switch(i.scaffold[a]){case s.email:this.sendEmail(t,f);break;case s.copy:this.copyLink(t,f);break;case s.webapi:this.webShare(t,f);break;default:this.share(t,f,a)}this.event().blur(t)}text(t){return(0,this.encoder)(t.text.replace("%url%",t.url).replace("%title%",t.title).replace("%summary%",t.summary))}share(t,e,s){const{options:n,encoder:i}=this;if(!s in n.uriform)return;let o=n.uriform[s].replace("%url%",i(e.url)).replace("%title%",i(e.title)).replace("%summary%",i(e.summary));if(/%text%/.test(n.uriform[s])&&(o=o.replace("%text%",this.text(e))),"facebook"==s||"messenger"==s){const t=n[`${s}_app_id`]??"";o=o.replace("%app_id%",i(t))}window.open(o,null,"toolbar=0,status=0,width=640,height=480")}sendEmail(t,e){const{options:s,encoder:n}=this,i=s.locale,o=s.uriform["send-email"].replace("%subject%",n(i.subject)).replace("%text%",this.text(e));window.open(o,"_self")}copyLink(t,e){if(!this.element)return;const s=this.options,n=s.locale;try{navigator.clipboard.writeText(e.url)}catch(t){if(t instanceof TypeError){const t=document,s=t.createElement("textarea");s.style="position:absolute;width:0;height:0;opacity:0;z-index:-1;overflow:hidden",s.value=e.url,t.append(s),s.focus(),s.select(),t.execCommand("copy"),s.remove()}}if(s.effects){const{root:t}=this,e=this.compo(!1,"effects-copied-link--bg",{hidden:!0}),i=this.compo("span","copied-link-msg",{innerText:n.copied});t.classList.add("share-effects-copied-link"),e.bind(t),i.bind(t),e.show(),this.delay((()=>{i.unbind(t),e.unbind(t),t.classList.remove("share-effects-copied-link")}),e,parseInt(s.copiedEffectDelay)||0)}}async webShare(t,e){try{await navigator.share({title:e.title,url:e.url})}catch(t){}}}}(this.ensemble=this.ensemble||{});