!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.ensemble=n.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(e){"use strict";
/*!
   * loltgt ensemble.Compo
   *
   * @version 0.0.1
   * @copyright Copyright (C) Leonardo Laureti
   * @license MIT License
   */function t(e,n){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,n)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=r(e);if(t){var s=r(this).constructor;n=Reflect.construct(o,arguments,s)}else n=o.apply(this,arguments);return i(this,n)}}function i(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t,n,i,r,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function a(e){o(s,i,r,a,l,"next",e)}function l(e){o(s,i,r,a,l,"throw",e)}a(void 0)}))}}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}Object.defineProperty(e,"__esModule",{value:!0}),e.SocialShare=void 0;var p=/html|head|body|meta|link|style|script/i,d=/(<(html|head|body|meta|link|style|script)*>)/i,m=/attributes|classList|innerHTML|outerHTML|nodeName|nodeType/,v=function(){function e(t,n,i,r){if(c(this,e),!(this instanceof e?this.constructor:void 0))throw"ensemble error: Wrong invocation, must be called with new.";var o=this._ns="_"+t,s=i?n.toString():"div";if(p.test(s))throw new Error("ensemble.Compo error: The tag name provided ('".concat(s,"') is not a valid name."));var l=this[o]=document.createElement(s);if(this[o].__compo=this,r&&"object"==u(r))for(var h in r){var f=h.toString();if(m.test(f))throw new Error("ensemble.Compo error: The property name provided ('".concat(f,"')' is not a valid name."));if(0===f.indexOf("on")&&r[f])l[f]=r[f].bind(this);else if("object"!=u(r[f]))l[f]=r[f];else if("children"===f&&"object"==u(r[f])&&r[f].length){var d,v=a(r.children);try{for(v.s();!(d=v.n()).done;){var y=d.value,b=y.tag,g=y.name,k=y.props;this.append(new e(t,b,g,k))}}catch(e){v.e(e)}finally{v.f()}}}if(0!=i&&1!=i){var w=l.className;l.className=t+"-"+n,i&&(l.className+=" "+t+"-"+i),w&&(l.className+=" "+w)}}return f(e,[{key:"install",value:function(e){e.appendChild(this[this._ns])}},{key:"uninstall",value:function(e){e.removeChild(this[this._ns])}},{key:"up",value:function(e){return this.node=Object.seal({ref:e}),!!e.replaceWith(this[this._ns])}},{key:"append",value:function(e){var t=this._ns;return!!this[t].appendChild(e[t])}},{key:"prepend",value:function(e){var t=this._ns;return!!this[t].prependChild(e[t])}},{key:"remove",value:function(e){var t=this._ns;return!!this[t].removeChild(e[t])}},{key:"replace",value:function(e){}},{key:"clone",value:function(){}},{key:"inject",value:function(e){if(e instanceof Element==!1||p.test(e.tagName)||d.test(e.innerHTML))throw new Error("ensemble.Compo error: The remote object could not be resolved into a valid node.");this.empty(),this._node=this[this._ns].appendChild(e)}},{key:"empty",value:function(){for(;this.first;)this.remove(this.first)}},{key:"hasAttr",value:function(e){return this[this._ns].hasAttribute(e)}},{key:"getAttr",value:function(e){return this[this._ns].getAttribute(e)}},{key:"setAttr",value:function(e,t){this[this._ns].setAttribute(e,t)}},{key:"delAttr",value:function(e){this[this._ns].removeAttribute(e)}},{key:"getStyle",value:function(e){return window.getComputedStyle(this[this._ns])[e]}},{key:"show",value:function(){this[this._ns].hidden=!1}},{key:"hide",value:function(){this[this._ns].hidden=!0}},{key:"enable",value:function(){this[this._ns].disabled=!1}},{key:"disable",value:function(){this[this._ns].disabled=!0}},{key:"children",get:function(){return Array.prototype.map.call(this[this._ns].children,(function(e){return e.__compo}))}},{key:"first",get:function(){var e=this._ns;return this[e].firstElementChild?this[e].firstElementChild.__compo:null}},{key:"last",get:function(){var e=this._ns;return this[e].lastElementChild?this[e].lastElementChild.__compo:null}},{key:"previous",get:function(){var e=this._ns;return this[e].previousElementSibling?this[e].previousElementSibling.__compo:null}},{key:"next",get:function(){var e=this._ns;return this[e].nextElementSibling?this[e].nextElementSibling.__compo:null}},{key:"classList",get:function(){return this[this._ns].classList}},{key:Symbol.toStringTag,get:function(){return"ensemble.Compo"}}],[{key:"isCompo",value:function(t){return Symbol.for(t)===Symbol.for(e.prototype)}}]),e}(),y=function(){function e(t,n){if(c(this,e),!(this instanceof e?this.constructor:void 0))throw"ensemble error: Wrong invocation, must be called with new.";n&&"object"===u(n)&&Object.assign(this,{},n),this[this._ns="_"+t]={ns:t}}var t,n,i;return f(e,[{key:"compo",value:function(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=this[this._ns].ns;return i=r?{ns:a,tag:e,name:t,props:n,fresh:o,stale:s}:new v(a,e,t,n),o&&"function"==typeof o&&(i.fresh=n.onfresh=o),s&&"function"==typeof s&&(i.stale=n.onstale=s),i}},{key:"render",value:(i=s(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this[n=this._ns][t]&&this[n][t].rendered||(this[n][t]={rendered:!0,fresh:this[t].fresh,stale:this[t].stale,params:this[t]},this[t]=new v(this[t].ns,this[t].tag,this[t].name,this[t].props)),this[n][t].fresh();case 2:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"stale",value:(n=s(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this[n=this._ns][t]&&this[n][t].rendered&&this[n][t].stale();case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"reflow",value:(t=s(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this._ns,n?this[i][t]=this.compo(this[i][t].params.ns,this[i][t].params.name,this[i][t].params.props):this[i][t]&&this[i][t].rendered&&this[i][t].fresh();case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:Symbol.toStringTag,get:function(){return"ensemble.Data"}}],[{key:"isData",value:function(t){return Symbol.for(t)===Symbol.for(e.prototype)}}]),e}(),b=function(){function e(t,n,i){if(c(this,e),!(this instanceof e?this.constructor:void 0))throw"ensemble error: Wrong invocation, must be called with new.";var r=this._ns="_"+t;i=(v.isCompo(i)?i.node:i)||document,this[r]={name:n,node:i}}return f(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this[this._ns].node.addEventListener(this[this._ns].name,e,t)}},{key:"remove",value:function(e){this[this._ns].node.removeEventListener(this[this._ns].name,e)}},{key:Symbol.toStringTag,get:function(){return"ensemble.Event"}}],[{key:"isEvent",value:function(t){return Symbol.for(t)===Symbol.for(e.prototype)}}]),e}(),g=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(o,e);var i,r=n(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,o),(t=r.call(this))._bindings(),t.options=t.defaults(t._defaults(),n),Object.freeze(t.options),t.element=e,t.init(),t}return f(o,[{key:"_defaults",value:function(){return{ns:"share",fx:!0,root:"body",intents:{facebook:0,twitter:0,whatsapp:1,messenger:1,telegram:1,linkedin:0,"send-email":2,"copy-link":3,"web-share":4},uriform:{facebook:"https://facebook.com/sharer.php?u=%url%",twitter:"https://twitter.com/share?url=%url%&text=%title%",whatsapp:"https://api.whatsapp.com/send?text=%text%",messenger:"fb-messenger://share/?link=%url%&app_id=%app_id%",telegram:"https://telegram.me/share/url?url=%url%&text=%text%",linkedin:"https://www.linkedin.com/sharing/share-offsite?mini=true&url=%url%&title=%title%&ro=false&summary=%summary%","send-email":"mailto:?subject=%subject%&body=%text%"},label:{},locale:{label:"Share",share:"Share on %s",send:"Send to %s",subject:"An interesting thing",text:"Hi! There is something may interesting you: %s",email:"Send via email",copy:"Copy link",copied:"Copied link!",whatsapp:"WhatsApp",linkedin:"LinkedIn","web-share":"Share"},onInit:function(){},onIntent:function(){}}}},{key:"_bindings",value:function(){this.intent=this.binds(this.intent)}},{key:"generator",value:function(){var e=this.options,t=this.share=this.compo("div","social-share");if(t.setAttr("data-social-share",""),t.up(this.element),e.label){var n=this.compo("span","label",e.label);n.classList.add("label"),t.append(n)}var i=this.actions=this.compo("ul","actions");t.append(i),this.built=!0}},{key:"init",value:function(){var e=this.options;this.built||(this.root=this.selector(e.root),this.generator(),this.populate(),e.onInit.call(this,this))}},{key:"populate",value:function(){var e=this.options;for(var t in e.intents){var n=t in e.locale?e.locale[t]:t.replace(/\w/,(function(e){return e.toUpperCase()})),i=void 0;switch(e.intents[t]){case 0:i=e.locale.share.replace("%s",n);break;case 1:i=e.locale.send.replace("%s",n);break;case 2:i=e.locale.email;break;case 3:i=e.locale.copy;break;case 4:if(!("share"in window.navigator)||"function"!=typeof window.navigator.share)continue;i=e.locale["web-share"]}this.action(t,i)}}},{key:"action",value:function(e,t){var n=this.options,i=this.compo("li","action",{className:n.ns+"-action-"+e}),r=this.compo("button","intent",{className:n.ns+"-intent-"+e,title:t,ariaLabel:t,onclick:this.intent});i.setAttr("data-share-intent",e),i.append(r);var o=this.compo("span","icon",{className:"icon-"+e});r.append(o),this.actions.append(i)}},{key:"intent",value:function(e,t){if(this.event(e),e.isTrusted){var n=this.options,i=t._share.parentElement;if(this.hasAttr(i,"data-share-intent")){var r,o,s,a=this.getAttr(i,"data-share-intent");r=this.selector('link[rel="canonical"]')?this.selector('link[rel="canonical"]').href:window.location.href,o=s=document.title,this.selector('meta[name="description"]')&&(s=this.selector('meta[name="description"]').content),"\r\n\r\n%title%\r\n%url%\r\n\r\n";var l={url:r,title:o,text:"\r\n\r\n%title%\r\n%url%\r\n\r\n",summary:s};if(n.onIntent.call(this,this,e,a,l),l.text=n.locale.text.replace("%s",l.text),a in n.intents)switch(a){case"send-email":this.sendEmail(e,l);break;case"copy-link":this.copyLink(e,l);break;case"web-share":this.webShare(e,l);break;default:this.social(e,l,a,i)}}}}},{key:"text",value:function(e){return encodeURIComponent(e.text.replace("%url%",e.url).replace("%title%",e.title).replace("%summary%",e.summary))}},{key:"social",value:function(e,t,n,i){var r=this.options;if(n in r.uriform!=!1){var o=r.uriform[n].replace("%url%",encodeURIComponent(t.url)).replace("%title%",encodeURIComponent(t.title)).replace("%summary%",encodeURIComponent(t.summary)),s=this.getAttr(i,"ariaLabel"),a="toolbar=0,status=0,width=640,height=480";if(/%text%/.test(r.uriform[n])&&(o=o.replace("%text%",this.text(t))),"messenger"===n){var l="messenger_app_id"in r?r.messenger_app_id:"";o=o.replace("%app_id%",encodeURIComponent(l))}console.log(o,s,a),window.open(o,s,a)}}},{key:"sendEmail",value:function(e,t){var n=this.options,i=n.uriform["send-email"].replace("%subject%",encodeURIComponent(n.locale.subject)).replace("%text%",this.text(t));console.log(i,"_self"),window.open(i,"_self")}},{key:"copyLink",value:function(e,t){var n=this.options,i=document.createElement("textarea");if(i.style="position:absolute;width:0;height:0;opacity:0;z-index:-1;overflow:hidden",i.value=t.url.toString(),this.appendNode(this.element,i),/iPad|iPhone|iPod/.test(window.navigator.userAgent)){var r=document.createRange(),o=getSelection();r.selectNodeContents(i),o.removeAllRanges(),o.addRange(r),i.setSelectionRange(0,999999)}else i.focus(),i.select();if(document.execCommand("copy"),i.remove(),n.fx){var s=this.root,a=this.compo("div","fx-copied-link--ground",{hidden:!0}),l=this.compo("span","copied-link-message",{innerText:n.locale.copied});s.classList.add("share-fx-copied-link"),a.install(s),l.install(s),a.show(),this.delay((function(){l.uninstall(s),a.uninstall(s),s.classList.remove("share-fx-copied-link")}),a,800)}}},{key:"webShare",value:(i=s(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.navigator.share({title:n.title,url:n.url});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0 instanceof TypeError?console.info("ensemble.SocialShare.webShare","TODO fallback"):console.log("ensemble.SocialShare.webShare",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(e,t){return i.apply(this,arguments)})}]),o}(function(){function e(){if(c(this,e),!(this instanceof e?this.constructor:void 0))throw"ensemble error: Wrong invocation, must be called with new."}return f(e,[{key:"defaults",value:function(e,t){var n={};for(var i in e)null!=e[i]&&"object"===u(e[i])?n[i]=Object.assign(e[i],t[i]):n[i]=void 0!==t[i]?t[i]:e[i];return n}},{key:"compo",value:function(e,t,n){return new v(this.options.ns,e,t,n)}},{key:"data",value:function(e){return new y(this.options.ns,e)}},{key:"event",value:function(e,t){if("string"==typeof e)return new b(this.options.ns,e,t);e&&(e.preventDefault(),e.target.blur())}},{key:"selector",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||document,n?t.querySelectorAll(e):t.querySelector(e)}},{key:"appendNode",value:function(e,t){return!!e.appendChild(t)}},{key:"prependNode",value:function(e,t){return!!e.prependChild(t)}},{key:"removeNode",value:function(e,t){return!!e.removeChild(t)}},{key:"cloneNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.cloneNode(t)}},{key:"hasAttr",value:function(e,t){return e.hasAttribute(t)}},{key:"getAttr",value:function(e,t){return e.getAttribute(t)}},{key:"setAttr",value:function(e,t,n){e.setAttribute(t,n)}},{key:"delAttr",value:function(e,t){e.removeAttribute(t)}},{key:"binds",value:function(e){var t=this;return function(n){e.call(t,n,this)}}},{key:"delay",value:function(e,t,n){var i=t?this.timing(t):0;setTimeout(e,i||n)}},{key:"timing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"transitionDuration",n=v.isCompo(e)?e.getStyle(t):window.getComputedStyle(e)[t];return n&&(n=n.indexOf("s")?1e3*parseFloat(n):parseInt(n)),n||0}}]),e}());e.SocialShare=g}));
//# sourceMappingURL=ensemble-socialshare-compat.min.js.map
